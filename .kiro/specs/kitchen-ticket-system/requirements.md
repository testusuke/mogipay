# 要件定義書 - 料理人向け半券機能

## はじめに

本ドキュメントは、MogiPay システムにおける料理人向け半券機能の要件を定義します。この機能は、レジで注文された商品を料理人が効率的に確認し、調理完了を管理するためのシステムです。

### ビジネス価値

- 料理人が注文内容をリアルタイムで確認できることで、調理の効率化を実現
- 調理待ち時間の可視化により、顧客満足度の向上に貢献
- 調理完了の記録により、注文の進捗管理が可能

## 要件

### 要件 1: 注文チケットの自動表示

**目的:** 料理人として、レジで購入された商品が自動的に表示されることで、注文を見逃すことなく調理を開始できる

#### 受入基準

1. WHEN レジシステムで単品商品が購入されたとき THEN キッチンチケットシステムは商品名と個数を表示しなければならない
2. WHEN レジシステムでセット商品が購入されたとき THEN キッチンチケットシステムはセット名とその中に含まれる単品の名前と個数を表示しなければならない
3. WHEN 複数の商品が同時に購入されたとき THEN キッチンチケットシステムは各商品を個別のチケットとして表示しなければならない
4. WHERE チケット表示画面において キッチンチケットシステムは商品情報を視認性の高いレイアウトで表示しなければならない

### 要件 2: 時系列順のチケット表示

**目的:** 料理人として、注文された順番で商品を確認できることで、公平な調理順序を維持できる

#### 受入基準

1. WHERE チケット一覧画面において キッチンチケットシステムは注文受付時刻が古い順にチケットをソートして表示しなければならない
2. WHEN 新しい注文が追加されたとき THEN キッチンチケットシステムはチケットを適切な位置に自動的に挿入しなければならない
3. WHERE 各チケットにおいて キッチンチケットシステムは注文からの経過時間を表示しなければならない
4. WHILE チケットが表示されている間 キッチンチケットシステムは経過時間を自動的に更新し続けなければならない

### 要件 3: 調理完了による削除機能

**目的:** 料理人として、調理が完了した商品をチケット一覧から削除できることで、未完了の注文に集中できる

#### 受入基準

1. WHERE 各チケットにおいて キッチンチケットシステムは調理完了ボタンを提供しなければならない
2. WHEN 料理人が調理完了ボタンを押したとき THEN キッチンチケットシステムはそのチケットを一覧から削除しなければならない
3. WHEN チケットが削除されたとき THEN キッチンチケットシステムは残りのチケットの表示順序を自動的に調整しなければならない
4. WHEN 調理完了ボタンが押されたとき THEN キッチンチケットシステムは完了時刻と処理した料理人の情報を記録しなければならない

### 要件 4: 単品商品の表示仕様

**目的:** 料理人として、単品商品の注文情報を正確に把握できることで、調理ミスを防止できる

#### 受入基準

1. WHERE 単品商品のチケットにおいて キッチンチケットシステムは商品名を大きく表示しなければならない
2. WHERE 単品商品のチケットにおいて キッチンチケットシステムは注文個数を商品名の近くに表示しなければならない
3. IF 同じ単品商品が複数個注文されているとき THEN キッチンチケットシステムは個数を強調表示しなければならない
4. WHERE 単品商品のチケットにおいて キッチンチケットシステムは商品カテゴリや調理の優先度を視覚的に区別できるようにしなければならない

### 要件 5: セット商品の表示仕様

**目的:** 料理人として、セット商品に含まれる全ての単品を確認できることで、正確にセット内容を提供できる

#### 受入基準

1. WHERE セット商品のチケットにおいて キッチンチケットシステムはセット名を見出しとして表示しなければならない
2. WHERE セット商品のチケットにおいて キッチンチケットシステムはセットに含まれる全ての単品の名前を表示しなければならない
3. WHERE セット商品のチケットにおいて キッチンチケットシステムは各単品の個数を表示しなければならない
4. WHERE セット商品のチケットにおいて キッチンチケットシステムは単品とセット商品を視覚的に区別できるようにしなければならない
5. IF セット商品に特記事項や調理上の注意点があるとき THEN キッチンチケットシステムはそれらの情報を表示しなければならない

### 要件 6: リアルタイム更新

**目的:** 料理人として、最新の注文状況を常に確認できることで、調理の遅延を防止できる

#### 受入基準

1. WHEN レジで新しい注文が作成されたとき THEN キッチンチケットシステムは 3 秒以内に新しいチケットを表示しなければならない
2. WHILE キッチンチケットシステムが起動している間 システムはレジシステムとの接続を維持しなければならない
3. IF レジシステムとの接続が切断されたとき THEN キッチンチケットシステムは警告を表示しなければならない
4. WHEN 接続が復旧したとき THEN キッチンチケットシステムは未表示の注文を自動的に取得して表示しなければならない

### 要件 7: 操作性とユーザビリティ

**目的:** 料理人として、調理中でも簡単に操作できるインターフェースを使用することで、作業効率を向上できる

#### 受入基準

1. WHERE チケット表示画面において キッチンチケットシステムは調理完了ボタンを大きくタッチしやすいサイズで表示しなければならない
2. WHERE チケット表示画面において キッチンチケットシステムは調理場の環境(明るさ、距離)でも視認しやすい配色とフォントサイズを使用しなければならない
3. WHEN 料理人がチケット情報を確認するとき THEN キッチンチケットシステムは最小限のスクロール操作で全情報を確認できるようにしなければならない
4. WHERE モバイルデバイスにおいて キッチンチケットシステムはタッチ操作に最適化された UI を提供しなければならない

## 補足事項

### 想定される利用シーン

- 学園祭の模擬店において、料理担当者が注文を受けて調理を行う
- レジ担当者と料理担当者が別の場所で作業することを想定

### 技術的制約

- フロントエンド: Next.js + shadcn/ui
- バックエンド: FastAPI (REST API)
- リアルタイム通信: ポーリングによる実装
- データベース: PostgreSQL 16

### 非機能要件

- レスポンス時間: チケット表示更新は 3 秒以内
- セキュリティ: 認証されたデバイスのみがチケット情報にアクセス可能
